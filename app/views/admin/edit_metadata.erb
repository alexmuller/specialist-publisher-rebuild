<%= content_for :page_title, "Edit #{current_format.title} finder" %>

<% content_for :back_link, render_back_link(href: "/admin/#{current_format.admin_slug}") %>

<h1>Editing <%= current_format.title %> finder</h1>

<div class="row">
  <div class="col-md-8">
    <%= form_tag do %>
      <h2>Finder metadata</h2>
      <p>How the finder displays to users</p>
      <% %w[name description].each do |input| %>
        <%= render "govuk_publishing_components/components/input", {
            label: {
              text: input,
            },
            name: input,
            value: current_format.finder_schema.schema[input],
          } %>
      <% end %>

      <% # special case for arrays %>
      <% %w[organisations editing_organisations related].each do |input| %>
        <%= render "govuk_publishing_components/components/textarea", {
            label: {
              text: "#{input} (content IDs, each on a separate line)",
            },
            name: input,
            rows: 3,
            value: current_format.finder_schema.schema[input]&.join(","),
          } %>
      <% end %>

      <% # special case for 'nested' structure `filter.format` %>
      <%= render "govuk_publishing_components/components/input", {
          label: {
            text: "filter.format",
          },
          name: "filter.format",
          value: current_format.finder_schema.schema["filter"]["format"],
          readonly: true,
        } %>

      <h2>Publisher configuration</h2>
      <p>How the finder and its documents are referred to in Specialist Publisher.</p>

      <% %w[format_name document_noun document_title].each do |input| %>
        <%= render "govuk_publishing_components/components/input", {
            label: {
              text: input,
            },
            name: input,
            value: current_format.finder_schema.schema[input],
          } %>
      <% end %>

      <%= render "govuk_publishing_components/components/button", {
        text: "Generate schema"
      } %>
    <% end %>
  </div>
</div>
